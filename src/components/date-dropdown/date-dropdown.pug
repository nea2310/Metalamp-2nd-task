include ../button/button.pug

mixin date-dropdown(options = {})
  -
    const { 
      type, 
      labelTextFrom = '', 
      labelTextTo = '', 
      labelTextFromTo = '',
    } = options

    const prepareOptions = require ('@com/date-dropdown/date-dropdown-utils.js').default;

    const {
      elementName,
      typeChecked,
      modifier,
      width,
    } = prepareOptions({ type });

  div(class = `${elementName} js-${elementName} js-${elementName}_type_${typeChecked} ${elementName}${width}`)
    if typeChecked === 'dateDropDown'
      div(class = `${elementName}__input-wrapper js-${elementName}__input-wrapper`)
        label(class = `${elementName}__label`)
          if labelTextFrom
            h3(class = `${elementName}__label-text`)= labelTextFrom
          input(class = `${elementName}__input js-${elementName}__input ${elementName}__input_from js-${elementName}__input_from ${elementName}__input_width_narrow`
            placeholder = "ДД.ММ.ГГГГ" type = "date" name = "date-from")
      div(class = `${elementName}__input-wrapper js-${elementName}__input-wrapper`)
        label(class = `${elementName}__label`)
          if labelTextTo
            h3(class = `${elementName}__label-text`)= labelTextTo
          input(class = `${elementName}__input js-${elementName}__input ${elementName}__input_to js-${elementName}__input_to ${elementName}__input_width_narrow`
            placeholder = "ДД.ММ.ГГГГ", type = "date" name = "date-to")
    if typeChecked === 'filterDateDropDown'
      div(class = `${elementName}__input-wrapper js-${elementName}__input-wrapper`)
        label(class = `${elementName}__label`)
          if labelTextFromTo
            h3(class = `${elementName}__label-text`)= labelTextFromTo
          input(class=`${elementName}__input js-${elementName}__input ${elementName}__input_from-to js-${elementName}__input_from-to ${elementName}__input_width_wide`
            type = "text" name = "dates")
    div(class = `${elementName}__calendar-wrapper js-${elementName}__calendar-wrapper ${elementName}__calendar-wrapper_hidden ${modifier}`)
      div(class = `${elementName}__buttons`)
        div(class = `${elementName}__button-clear js-${elementName}__button-clear`)
          +button({
            text: 'очистить', 
            type: 'plain-text',
          })
        div(class = `${elementName}__button-apply js-${elementName}__button-apply`)
          +button({
            text: 'применить', 
            type: 'plain-text',
          })
    div(class = `${elementName}__error-message js-${elementName}__error-message`)
      +error-message()
